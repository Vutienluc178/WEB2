<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bảng tính Sai số và Số quy tròn</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Be Vietnam Pro', sans-serif;
            background-color: #f3f4f6; /* A slightly lighter gray for a fresh look */
        }
        /* Style cho scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        ::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800 flex items-center justify-center min-h-screen py-8">

    <div class="container mx-auto p-4 max-w-4xl">
        <!-- Header -->
        <header class="text-center mb-6">
            <h1 class="text-2xl md:text-3xl font-bold text-blue-600">Công cụ Tính toán Sai số & Số quy tròn</h1>
            <p class="text-sm text-gray-600 mt-1">Tác giả: Vũ Tiến Lực - Trường THPT Nguyễn Hữu Cảnh</p>
        </header>

        <!-- Bảng tính sai số -->
        <div class="bg-white rounded-lg shadow-xl p-6 md:p-8">
            <div class="flex flex-col md:flex-row gap-8">
                <!-- Cột Trái: Máy tính -->
                <div class="w-full md:w-1/2">
                    <h3 class="text-lg font-bold mb-4 text-gray-700">Nhập dữ liệu</h3>
                    <div class="space-y-4">
                        <div>
                            <label for="exact-number" class="block text-sm font-medium text-gray-700">Số đúng (<span class="italic">a</span>)</label>
                            <input type="text" id="exact-number" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" placeholder="ví dụ: 3.14159 (có thể bỏ trống)">
                        </div>
                        <div>
                            <label for="approx-number" class="block text-sm font-medium text-gray-700">Số gần đúng (<span class="italic">a'</span>)</label>
                            <input type="text" id="approx-number" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" placeholder="ví dụ: 3.14 (bắt buộc)">
                        </div>
                         <div>
                            <label for="accuracy-d" class="block text-sm font-medium text-gray-700">Độ chính xác (<span class="italic">d</span>)</label>
                            <input type="text" id="accuracy-d" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" placeholder="ví dụ: 0.002 (nếu có)">
                             <p class="mt-1 text-xs text-gray-500">Nhập nếu biết sai số tuyệt đối không vượt quá d.</p>
                        </div>
                        <div>
                             <label for="rounding-select" class="block text-sm font-medium text-gray-700">Quy tròn số gần đúng đến hàng</label>
                             <select id="rounding-select" class="mt-1 block w-full px-3 py-2 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                                <option value="1000">Nghìn</option>
                                <option value="100">Trăm</option>
                                <option value="10">Chục</option>
                                <option value="1" selected>Đơn vị</option>
                                <option value="0.1">Phần mười</option>
                                <option value="0.01">Phần trăm</option>
                                <option value="0.001">Phần nghìn</option>
                                <option value="0.0001">Phần chục nghìn</option>
                             </select>
                        </div>
                    </div>
                    <button id="calculate-error-btn" class="mt-6 w-full bg-blue-600 text-white font-bold py-2.5 px-4 rounded-lg hover:bg-blue-700 transition duration-200 shadow">Tính toán</button>
                    
                    <div id="error-results-container" class="mt-6 pt-4 border-t border-gray-200 space-y-3">
                        <p class="text-center text-gray-500">Kết quả sẽ được hiển thị ở đây.</p>
                    </div>
                </div>
    
                <!-- Cột Phải: Kiến thức -->
                <div class="w-full md:w-1/2 border-t md:border-t-0 md:border-l border-gray-200 pt-6 md:pt-0 md:pl-8">
                    <h3 class="text-lg font-bold mb-4 text-gray-700">Kiến thức & Công thức</h3>
                    <div class="space-y-4 text-sm">
                        <div class="p-3 bg-gray-50 rounded-lg border border-gray-200">
                            <h4 class="font-bold text-blue-600">1. Sai số tuyệt đối</h4>
                            <p class="mt-1">Là giá trị tuyệt đối của hiệu giữa số đúng và số gần đúng, cho biết mức độ sai lệch.</p>
                            <p class="mt-2 font-mono bg-gray-200 p-2 rounded text-center">Δa = |a - a'|</p>
                        </div>
                        <div class="p-3 bg-gray-50 rounded-lg border border-gray-200">
                            <h4 class="font-bold text-blue-600">2. Sai số tương đối</h4>
                            <p class="mt-1">Là tỉ số giữa sai số tuyệt đối và giá trị tuyệt đối của số gần đúng, đánh giá độ chính xác của phép đo. Thường được viết dưới dạng phần trăm.</p>
                            <p class="mt-2 font-mono bg-gray-200 p-2 rounded text-center">δa = Δa / |a'|</p>
                        </div>
                         <div class="p-3 bg-gray-50 rounded-lg border border-gray-200">
                            <h4 class="font-bold text-blue-600">3. Độ chính xác</h4>
                            <p class="mt-1">Nếu sai số tuyệt đối Δa = |a - a'| ≤ d, thì <span class="italic">d</span> được gọi là độ chính xác. Từ đó, ta có thể ước lượng số đúng <span class="italic">a</span> nằm trong đoạn:</p>
                            <p class="mt-2 font-mono bg-gray-200 p-2 rounded text-center">a' - d ≤ a ≤ a' + d</p>
                        </div>
                        <div class="p-3 bg-gray-50 rounded-lg border border-gray-200">
                            <h4 class="font-bold text-blue-600">4. Số quy tròn</h4>
                            <p class="mt-1">Là cách làm tròn một số đến một hàng cho trước theo quy tắc:</p>
                            <ul class="list-disc list-inside mt-1 pl-2 space-y-1">
                                <li>Nếu chữ số đầu tiên bị bỏ đi nhỏ hơn 5, ta giữ nguyên bộ phận còn lại.</li>
                                <li>Nếu chữ số đầu tiên bị bỏ đi lớn hơn hoặc bằng 5, ta cộng thêm 1 vào chữ số cuối cùng của bộ phận còn lại.</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // --- LOGIC FOR ERROR CALCULATION ---
        function calculateAndDisplayErrors() {
            const exactNumInput = document.getElementById('exact-number').value.replace(',', '.');
            const approxNumInput = document.getElementById('approx-number').value.replace(',', '.');
            const accuracyInput = document.getElementById('accuracy-d').value.replace(',', '.');
            const roundingDigit = parseFloat(document.getElementById('rounding-select').value);
            const resultsContainer = document.getElementById('error-results-container');

            const a = parseFloat(exactNumInput);
            const a_prime = parseFloat(approxNumInput);
            const d = parseFloat(accuracyInput);

            if (isNaN(a_prime)) {
                resultsContainer.innerHTML = `<p class="text-red-500 font-bold text-center">Vui lòng nhập "Số gần đúng". Đây là giá trị bắt buộc.</p>`;
                return;
            }

            let resultsHTML = `<h3 class="text-lg font-bold text-gray-700">Kết quả tính toán:</h3>`;
            let hasCalculatedSomething = false;

            // Kịch bản 1: Tính sai số tuyệt đối và tương đối (cần a và a')
            if (!isNaN(a)) {
                const absoluteError = Math.abs(a - a_prime);
                const relativeError = (a_prime !== 0) ? (absoluteError / Math.abs(a_prime)) : Infinity;
                const relativeErrorPercent = relativeError * 100;
                resultsHTML += `
                    <div class="p-3 bg-blue-50 rounded-md border border-blue-200">
                        <p><strong>Sai số tuyệt đối (Δa):</strong> <span class="font-mono text-blue-700 font-bold">${absoluteError.toPrecision(6)}</span></p>
                    </div>
                    <div class="p-3 bg-green-50 rounded-md border border-green-200">
                        <p><strong>Sai số tương đối (δa):</strong> <span class="font-mono text-green-700 font-bold">${relativeError.toPrecision(6)} ≈ ${relativeErrorPercent.toFixed(4)}%</span></p>
                    </div>`;
                hasCalculatedSomething = true;
            }

            // Kịch bản 2: Ước lượng khoảng giá trị của a (cần a' và d)
            if (!isNaN(d)) {
                const lowerBound = a_prime - d;
                const upperBound = a_prime + d;
                resultsHTML += `
                    <div class="p-3 bg-yellow-50 rounded-md border border-yellow-200">
                        <p><strong>Ước lượng số đúng (a) với độ chính xác d = ${d}:</strong></p>
                        <p class="font-mono text-yellow-800 font-bold text-center mt-1">${lowerBound.toPrecision(6)} ≤ a ≤ ${upperBound.toPrecision(6)}</p>
                    </div>`;
                hasCalculatedSomething = true;
            }

            // Kịch bản 3: Quy tròn số a' (chỉ cần a')
            let roundedNumber;
            if (roundingDigit >= 1) { // Round to tens, hundreds etc.
                roundedNumber = Math.round(a_prime / roundingDigit) * roundingDigit;
            } else { // Round to decimals
                const multiplier = 1 / roundingDigit;
                roundedNumber = Math.round(a_prime * multiplier) / multiplier;
            }
             resultsHTML += `
                <div class="p-3 bg-purple-50 rounded-md border border-purple-200">
                    <p><strong>Số gần đúng (${a_prime}) quy tròn đến hàng ${document.getElementById('rounding-select').options[document.getElementById('rounding-select').selectedIndex].text.toLowerCase()}:</strong> <span class="font-mono text-purple-700 font-bold">${roundedNumber}</span></p>
                </div>`;
            hasCalculatedSomething = true;


            if (!hasCalculatedSomething) {
                 resultsContainer.innerHTML = `<p class="text-gray-500 font-bold text-center">Chưa có đủ dữ liệu để thực hiện phép tính nào.</p>`;
            } else {
                resultsContainer.innerHTML = resultsHTML;
            }
        }

        document.getElementById('calculate-error-btn').addEventListener('click', calculateAndDisplayErrors);
    </script>
</body>
</html>

